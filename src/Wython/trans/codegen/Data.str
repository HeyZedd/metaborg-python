module Data

imports
  signatures/WebAssembly/-
  ast-syntax/-
  trans/codegen/-
  
rules

  data:
    (stmts, offsets) -> <concat> <map(dataStmt)> <zip> (stmts, offsets)
    
  dataStmt: 
    (ExprStmt(Call(name, args, kwargs)), offsets)
       -> dataList 
    where
      dataList := <concat> <map(dataParam)> <zip> (args, offsets)

  dataParam:
    (param, [offset]) -> [
       WastData(
          WastI32Const(offset), 
          Some(val)
        )]
    where
      val := <to-string> param
